<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
    <!-- 컨텐츠페이지의 CSS 영역이 들어감 -->

    <!-- 컨텐츠페이지의 스크립트 영역이 들어감 -->
    <script th:inline="javascript">
        let pageMemberId = [[${pageMemberId}]];
        let memberId = [[${memberId}]];

    </script>
    <script th:src="@{/js/member/profile.js}"></script>
</head>
<div layout:fragment="content">
<!--프로필 섹션-->
<section class="profile">
    <!--유저정보 컨테이너-->
    <div class="profileContainer">

        <!--유저이미지-->
        <div class="profile-left">
            <div class="profile-img-wrap story-border" onclick="popup('.modal-image')">
                <form id="userProfileImageForm">
                    <input type="file" name="file" style="display: none;"
                           id="userProfileImageInput" />
                </form>

                <img class="profile-image" src="#"
                     onerror="this.src='/images/default.png'" id="userProfileImage" />
            </div>
        </div>
        <!--유저이미지end-->

        <!--유저정보 및 사진등록 구독하기-->
        <div class="profile-right">
            <div class="name-group">
                <h2 id="profileName"></h2>
                <button class="cta none" id="imageUploadBtn" onclick="location.href='/image/upload'">게시물 등록</button>
                <button class="cta none" id="profileUploadBtn" onclick="location.href='/member/'+memberId+'/update'">프로필 편집</button>
                <button class="cta blue none" id="unSubscribeBtn" data-su th:onclick="'toggleSubscribe('+${pageMemberId}+', this)'">구독취소</button>
                <button class="cta none" id="inSubscribeBtn" th:onclick="'toggleSubscribe('+${pageMemberId}+', this)'">구독하기</button>
                <button class="modi none" id="modalInfo" onclick="popup('.modal-info')">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="modi none" id="modalMemberInfo" onclick="popup('.modal-member-info')">
                    <i class="fas fa-cog"></i>
                </button>
            </div>

            <div class="subscribe">
                <ul>
                    <li><a href="javascript:void(0)"> 게시물<span id="imageCount">0</span>
                    </a></li>
                    <li><a href="javascript:void(0)" th:onclick="'subscribeInfoModalOpen('+${pageMemberId}+')'"> 구독정보<span id="subscribeCount">0</span>
                    </a></li>
                </ul>
            </div>
            <div class="state">
                <h4 id="bio"></h4>
            </div>
        </div>
        <!--유저정보 및 사진등록 구독하기-->

    </div>
</section>

<!--게시물컨섹션-->
<section id="tab-content">
    <!--게시물컨컨테이너-->
    <div class="profileContainer">
        <!--그냥 감싸는 div (지우면이미지커짐)-->
        <div id="tab-1-content" class="tab-content-item show">
            <!--게시물컨 그리드배열-->
            <div class="tab-1-content-inner" id="image-content-item">

                <div class="img-box">
                    <a href=""> <img src="/images/home.jpg" />
                    </a>
                    <div class="comment">
                        <a href="#" class=""> <i class="fas fa-heart"></i><span>0</span>
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<div class="modal-info" onclick="modalInfo()">
    <div class="modal">
        <button type="button" onclick="location.href='/member/'+memberId+'/update'">프로필 편집</button>
        <button type="button" onclick="location.href='/logout'">로그아웃</button>
        <button type="button" onclick="closePopup('.modal-info')">취소</button>
    </div>
</div>

    <div class="modal-member-info" onclick="modalInfo()">
        <div class="modal">
            <button type="button" style="color: red">차단</button>
            <button type="button" style="color: red">제한</button>
            <button type="button" style="color: red">신고</button>
            <button type="button" onclick="closePopup('.modal-member-info')">취소</button>
        </div>
    </div>


    <div class="modal-subscribe-info" onclick="modalSubscribeInfo()">
    <div class="modal">
        <div class="modal__subscribe__img">
            <img id="ms-profileImageUrl" src="#"/>
        </div>
        <button type="button"><span id="ms-username" style="color: #000;font-weight: 700;"></span>님의 구독을 취소하시겠어요?</button>
        <button type="button" onclick="cancelSubscribe()"><span style="color: red;">구독 취소</span></button>
        <button type="button" onclick="closePopup('.modal-subscribe-info')">취소</button>
        <input type="hidden" id="toMemberId" value="">
    </div>
</div>

<div class="modal-image" th:if="${pageMemberId == memberId}" onclick="modalImage()">
    <div class="modal">
        <p>프로필 사진 바꾸기</p>
        <button th:onclick="'profileImageUpload('+${pageMemberId}+','+${memberId}+')'">사진 업로드</button>
        <button onclick="closePopup('.modal-image')">취소</button>
    </div>
</div>

<div class="modal-subscribe">
    <div class="subscribe">
        <div class="subscribe-header">
            <span>구독정보</span>
            <button onclick="modalClose()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="subscribe-list" id="subscribeModalList">

        </div>
    </div>
</div>

<div class="modal-image-info">
    <div class="image-info">
        <main class="main" style="padding-top: 0px;">
            <section class="container">
                <button class="model-close-btn" onclick="modalInfoClose()">
                    <i class="fas fa-times" style="font-size: 20px;"></i>
                </button>
                <article class="story-list" id="storyList">
                    <div class="story-list__item">
                        <div class="sl__item__header">
                            <div>
                                <img class="profile-image" src="#"
                                     onerror="this.src='../images/person.jpeg'"/>
                            </div>
                            <div>TherePrograming</div>
                        </div>
                        <div class="sl__item__img">
                            <img src="../images/home.jpg"/>
                        </div>
                        <div class="sl__item__contents">
                            <div class="sl__item__contents__icon">

                                <button>
                                    <i class="fas fa-heart active" id="storyLikeIcon-1" onclick="toggleLike()"></i>
                                </button>
                            </div>
                            <span class="like"><b id="storyLikeCount-1">3 </b>likes</span>

                            <div class="sl__item__contents__content">
                                <p>등산하는 것이 너무 재밌네요</p>
                            </div>
                            <div id="storyCommentList-1">
                                <div class="sl__item__contents__comment" id="storyCommentItem-1">
                                    <p>
                                        <b>Lovely :</b> 부럽습니다.
                                    </p>

                                    <button>
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="sl__item__input">
                                <input type="text" placeholder="댓글 달기..." id="storyCommentInput-1"/>
                                <button type="button" onClick="addComment()">게시</button>
                            </div>
                        </div>
                    </div>
                </article>
            </section>
        </main>
    </div>
</div>

</div>
</html>